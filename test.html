<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>test</title>
    <!-- <link id="favicon" rel="shortcut icon" href=""/> -->
    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <!-- D3.js -->
    <script src="https://d3js.org/d3-hierarchy.v1.min.js"></script>    
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <!-- data -->
    <script src="data/edas-ekaw_dataset.js"></script>

    <!-- my scripts -->
    <script src="indented_tree.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h1>TESTING!!!</h1>
    <div>
        <svg width="800", height="500" style="border: solid 1px;"></svg>
    </div>
    <h3>testDiv</h3>
    <div id="testDiv" width="400", height="400"></div>

    <script>
        function showArray(data) {
            d3.select('#testDiv')
                .html(data.map( d => {
                    return `${d.depth} ${d.data.name}`;
                }).join('<br>'));
            console.log(data.map( d => `${d.depth} ${d.data.name}`).join('\n'));
        }
        function drawTree(data) {
            d3.select('svg')
            .append('g').attr('transform', 'translate(0,10)')
                .selectAll('text')
                .data(data)
                .enter().append('text')
                    .text(d => d.data.name)
                    .attr('x', d => {return d.depth*15 + 'px';})
                    .attr('y', (d,i) => {return i*15 + 'px';})
                    .style('dominant-baseline', 'central');
        }

        var ekaw_root = d3.hierarchy(ekaw.root);
        let dx = 10, dy = 160;
        var ekaw_tree = d3.tree(ekaw_root).nodeSize([dx, dy]);

        console.log('TESTING!!!')
        // console.log(ekaw_root);
        // console.log('is it d3.hierarchy? ' + (ekaw_root instanceof d3.hierarchy));
        // console.log(ekaw_root.children[0].children);
        // showArray(ekaw_root.descendants());
        // drawTree(ekaw_root.descendants());

        console.log('testing indented_tree.js');
        console.log('nodeHeight: ' + nodeHeight);
        d3.select('svg')
            .append(() => treechart(ekaw.root, "left"));

        // boxes = data => {
        //     console.log('creating detached g');
        //     const g = d3.create('svg:g');
        //     g.selectAll('g')
        //         .data(data).enter()
        //         .append('rect').attr('fill', 'green')
        //         .attr('x', d => d).attr('y', d => d)
        //         .attr('height', d => d).attr('width', d => d);
        //     return g.node();
        // }
        // d3.select('svg').append(() => boxes([5,10,20,40]));
        // boxSvg = data => {
        //     console.log('creating detached svg');
        //     const svg = d3.create('svg')
        //         .attr('width', 200).attr('height', 100)
        //         .attr("viewBox", [0, 0, 100, 100])
        //         .attr('overflow', 'visible')
        //         .style('border', 'solid 1px');
        //     const g = svg.append('g');
        //     g.selectAll('g')
        //         .data(data).enter()
        //         .append('rect').attr('fill', 'green')
        //         .attr('x', d => d).attr('y', d => d)
        //         .attr('height', d => d).attr('width', d => d);
        //     return svg.node();
        // }
        // d3.select('#testDiv').append(() => boxSvg([100,10,30,5]));

    
    </script>
</body>